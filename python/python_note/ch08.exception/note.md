# 第8章 异常

异常不仅仅是错误,还是一种正常的跳转逻辑.

## 8.1 异常

除多了个可选的else分支外,与其他语言并无多大差别.

关键字raise抛出异常,else分支只在没有异常发生时执行.可无论如何,finally总会被执行.
可以有多个except分支捕获不同类型的异常.

支持在except中重新抛出异常

如果需要,可用sys.exec_info()获取调用堆栈上的最后异常信息.

自定义异常通常继承自Exception,应该用具体异常类型表示不同的错误行为,而不是message这样的状态值.

除了异常,还可以显示警告信息,warnings模块另有函数用来控制警告的具体行为.

## 8.2 断言

assert受只读参数 `__debug__` 控制,可以在启动时添加 "-O" 参数使其失效.

## 8.3 上下文

上下文管理协议(Context Meanagement Protocol)为代码块提供了包含初始化和清理操作的安全
上下文环境.即便代码块发生异常,清理操作也会被执行.

  - `__enter__`: 初始化环境,返回上下文对象
  - `__exit__`: 执行清理环境.返回True时,将阻止异常向外传递

demo1.py

可以在一个with语句中使用多个上下文对象，依次按照FIFO顺序调用.

**contextlib**

标准库contextlib提供了一个contextmanager装饰器,用来简化上下文类型开发.

